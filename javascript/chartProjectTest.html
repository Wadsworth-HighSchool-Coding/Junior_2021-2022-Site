<!DOCTYPE html>
<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<body>

<canvas id="myChart" style="width:100%;max-width:600px"></canvas>

<script>
    var hasRan=false;
    var xValues = [];
    var yValues = [];
    //generateData("x * x + 7", -10, 10, 1);
    function makeTheChart()
    {

        new Chart("myChart", {
            type: "line",
            data: {
                labels: xValues,
                datasets: [{
                    fill: true,
                    pointRadius: 5,
                    borderColor: "rgba(26,255,0,0.5)",
                    data: yValues
                }]
            },
            options: {
                legend: {display: false},
                title: {
                    display: true,
                    text: "y = x * x + 7",
                    fontSize: 16
                }
            }
        });
    }
    function generateData(value, i1, i2, step) {

        for (let x = i1; x <= i2; x += step) {
            yValues.push(eval(value));
            xValues.push(x);
        }

    }
    function  getDataAndGraph()
    {
        if(hasRan === true)
        {
            alert("ran")
            var canvas = document.getElementById('myChart');
            var context = canvas.getContext('2d');
            context.clearRect(0, 0, canvas.width, canvas.height);
        }
        hasRan = true;
        var equation = document.getElementById("Equ").value;
        var xLow = document.getElementById("xLow").value;
        var xHigh = document.getElementById("xHigh").value;
        var xScale = document.getElementById("xScale").value;
        //generateData("x * x + 7", -10, 10, 1);
        if(equation.includes("="))
        {
            equation = equation.split("=").pop();
        }
        generateData(equation, parseInt(xLow), parseInt(xHigh), parseInt(xScale));
        makeTheChart();
    }



</script>
<br>
<label for="Equ">Equation:</label>
<input type="text" name="Equ" id="Equ">
<br>
<label for="xLow">LowerX:</label>
<input type="xLow" name="xLow" id="xLow">
<br>
<label for="xHigh">UpperX:</label>
<input type="xHigh" name="xHigh" id="xHigh">
<br>
<label for="xScale">xScale:</label>
<input type="xScale" name="xScale" id="xScale">
<br>
<input onClick="getDataAndGraph();" type="button" name="button1" id ="button1" value="Call Chart">
</body>
</html>
